import{j as n}from"./jsx-runtime-BlAj40OV.js";import{useMDXComponents as v}from"./index-BI1Biiay.js";import{ae as U}from"./index-DVJlPPmh.js";import{u as I,D as J}from"./DropTarget-DC9g-q0x.js";import{b as L,a as q,c as X,t as z,d as b,i as G,g as D}from"./_baseSet-DWBlGqXY.js";import{i as A,c as K,a as S,k as M,t as V}from"./util-Bkb1mpYR.js";import{r as d}from"./index-Cs7sjTYM.js";import{u as Y}from"./tokens-DzgWNd4J.js";import{K as W,B as H,z as Q}from"./index-DKKFdtDf.js";import{P as Z}from"./index.esm-BhC0IwuT.js";import{t as ee}from"./tokens-IDH4BAlH.js";import"./iframe-Bzqzg5H9.js";import"../sb-preview/runtime.js";import"./index-BU4L-DQy.js";import"./_commonjsHelpers-BosuxZz1.js";import"./extends-CF3RwP-h.js";import"./index-nrpnv_Jx.js";import"./index-DrFu-skq.js";import"./index-D3ylJrlI.js";import"./clsx-B-dksMZM.js";import"./_Set-B09sQViy.js";function te(e,t,r){return e==null?e:L(e,t,r)}function ne(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function re(e,t,r){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(s);++o<s;)a[o]=e[o+t];return a}function se(e,t){return t.length<2?e:q(e,re(t,0,-1))}function oe(e,t){return t=X(t,e),e=se(e,t),e==null||delete e[z(ne(t))]}function O(e,t){return e==null?!0:oe(e,t)}const w=(e,t,r,o,s)=>{o(r)?s(t,r):G(r)&&Object.entries(r).forEach(([a,i])=>{w(e,[...t,a],i,o,s)})},P=(e,t=A)=>{const r=b(e,()=>{});return w(r,[],r,t,(o,s)=>{s.path=o}),r},ie=(e,t=A)=>{const r=[];return w(e,[],e,t,(o,s)=>{r.push(s)}),r},R=e=>e&&e.$extensions&&e.$extensions["nl.nldesignsystem.redirect"]?e.$extensions["nl.nldesignsystem.redirect"]:void 0,ae=e=>!!R(e),le=e=>!!e&&typeof e=="object"&&Object.keys(e).length===0,ce=e=>!!e&&typeof e=="object"&&!!e.$metadata&&typeof e.$metadata=="object"&&Array.isArray(e.$metadata.tokenSetOrder),de=(e,t)=>{const r=b(e,s=>s),o=s=>s[0].charAt(0)!=="$"&&!!s[1]&&typeof s[1]=="object";return Object.entries(e).filter(o).forEach(([s,a])=>{r[s]=N(a,t)}),r},E=(e,t)=>{const r=P(e),o=ie(P(t,S),S),s=o.filter(i=>ae(i)),a=s.map(i=>{const c=i.path;return{metadataToken:i,oldToken:D(r,c),originalToken:D(e,c),oldPath:c,newPath:K(R(i)||"")}}).filter(({oldToken:i})=>!!i);return{metadataTokens:o,redirectTokens:s,migratableTokens:a}},N=(e,t)=>{const{metadataTokens:r,redirectTokens:o,migratableTokens:s}=E(e,t);let a=b(e,i=>i);return a=s.reduce((i,{oldToken:c,originalToken:g,oldPath:m,newPath:f})=>(c&&te(i,f,g),m?(O(i,m),m.reduceRight((h,k,x,T)=>{const u=T.slice(0,x),j=D(h,u);return le(j)&&O(h,u),h},i)):i),a),a},_=({tokens:e})=>{const t=Y,r="tokens.json";let[o,s]=d.useState(e);const[a,i]=d.useState([]),[c,g]=d.useState(null),[m,f]=d.useState(null),[h,k]=d.useState(r),x=[],T=d.useCallback(y=>{k(r),y.filter(l=>/\.json$/i.test(l.path||"")).forEach(l=>{const p=new FileReader;p.onabort=()=>console.log("file reading was aborted"),p.onerror=()=>console.log("file reading has failed"),p.onload=()=>{if(typeof p.result=="string"){const C=JSON.parse(p.result);s(C),typeof l.path=="string"&&k(l.path)}},p.readAsText(l)})},[]),{getRootProps:u,getInputProps:j,isDragActive:B}=I({onDrop:T});return d.useEffect(()=>{const{migratableTokens:y}=E(o,t),l=ce(o)?de(o,t):N(o,t);i(y),g(l),f(URL.createObjectURL(new Blob([JSON.stringify(l,null,2)],{type:"text/json"})))},[o]),n.jsxs(n.Fragment,{children:[n.jsx("h2",{children:h}),n.jsx($,{migratableTokens:a,deprecatedTokens:x}),n.jsx("div",{...u(),children:n.jsxs(J,{dropEffect:B?"copy":void 0,children:[n.jsx("input",{...j()}),n.jsx(Z,{children:"Drop your own file here!"})]})}),a.length?n.jsxs(n.Fragment,{children:[n.jsx("h2",{children:"Your new design tokens file"}),m?n.jsx(W,{children:n.jsx(H,{appearance:"primary-action",href:m,download:h,children:"Download JSON"})}):null,n.jsx(Q,{children:JSON.stringify(c,null,2)})]}):null]})},$=({migratableTokens:e,deprecatedTokens:t})=>n.jsxs(n.Fragment,{children:[e.length?n.jsxs("table",{children:[n.jsx("caption",{children:"Tokens that will migrated"}),n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Old name"}),n.jsx("th",{children:"New name"})]})}),n.jsx("tbody",{children:e.map(({oldPath:r,newPath:o},s)=>n.jsxs("tr",{children:[n.jsx("th",{children:n.jsx("code",{children:M(r)})}),n.jsx("td",{children:n.jsx("code",{children:M(o)})})]},s))})]}):n.jsx("p",{children:"✅ This theme is to date! 0 tokens need to be migrated."}),n.jsx("h3",{children:"Deprecated tokens"}),t.length?n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"The following tokens are deprecated without migration path. You should probably remove these tokens:"}),n.jsx("ul",{children:t.map((r,o)=>n.jsx("li",{children:n.jsx("code",{children:V(r.path)})},o))})]}):n.jsx("p",{children:"✅ This theme is to date! 0 deprecated tokens are used."})]});_.__docgenInfo={description:"",methods:[],displayName:"DesignTokensMigration",props:{tokens:{required:!0,tsType:{name:"DesignTokenTree",elements:[{name:"StyleDictionaryDesignToken"}],raw:"DesignTokenTree<StyleDictionaryDesignToken>"},description:""}}};$.__docgenInfo={description:"",methods:[],displayName:"DesignTokensMigrationPresentation",props:{migratableTokens:{required:!0,tsType:{name:"Array",elements:[{name:"MigratableToken"}],raw:"MigratableToken[]"},description:""},deprecatedTokens:{required:!0,tsType:{name:"Array",elements:[{name:"StyleDictionaryDesignToken"}],raw:"StyleDictionaryDesignToken[]"},description:""}}};function F(e){const t={h1:"h1",...v(),...e.components};return n.jsxs(n.Fragment,{children:[n.jsx(U,{title:"Voorbeeld Thema/Dashboard"}),`
`,n.jsx(t.h1,{id:"design-token-dashboard",children:"Design Token Dashboard"}),`
`,n.jsx(_,{tokens:ee})]})}function Re(e={}){const{wrapper:t}={...v(),...e.components};return t?n.jsx(t,{...e,children:n.jsx(F,{...e})}):F(e)}export{Re as default};
